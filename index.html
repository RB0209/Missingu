<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>I Miss You</title>
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to bottom, #ffe6f0, #ffd6eb);
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }

    /* Floating background hearts */
    .heart {
      position: absolute;
      color: #ff6b8a;
      font-size: 24px;
      opacity: 0.3;
      animation: rise 12s linear infinite;
    }
    @keyframes rise {
      from { transform: translateY(100vh) scale(0.5); opacity: 0.6; }
      to   { transform: translateY(-10vh) scale(1.2); opacity: 0; }
    }

    /* Intro box */
    #intro {
      text-align: center;
      z-index: 2;
    }
    .box {
      width: 200px; height: 200px;
      background: #ff6b8a;
      display: flex; align-items: center; justify-content: center;
      border-radius: 20px;
      color: white; font-size: 22px;
      cursor: pointer;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      transition: transform .2s;
    }
    .box:hover { transform: scale(1.05); }

    /* Video player */
    #videoPlayer {
      display: none;
      position: relative;
      text-align: center;
      z-index: 2;
    }
    video {
      max-width: 90vw;
      max-height: 80vh;
      border-radius: 16px;
      display: block;
    }

    /* Floating crying emoji layer */
    .emoji-layer {
      position: absolute;
      inset: 0;
      pointer-events: none;
      overflow: hidden;
    }
    .emoji {
      position: absolute;
      bottom: -40px;
      font-size: 28px;
      opacity: 0.9;
      animation: floatUp linear forwards;
    }
    @keyframes floatUp {
      0%   { transform: translateY(0) rotate(0deg); opacity: 1; }
      100% { transform: translateY(-120vh) rotate(360deg); opacity: 0; }
    }

    /* Love letter modal */
    #letter {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.6);
      backdrop-filter: blur(5px);
      align-items: center;
      justify-content: center;
      z-index: 3;
    }
    .letter-content {
      background: #fff;
      border-radius: 16px;
      padding: 20px 30px;
      max-width: 400px;
      text-align: center;
      font-family: 'Great Vibes', cursive;
      font-size: 26px;
      color: #444;
      box-shadow: 0 10px 40px rgba(0,0,0,0.3);
      animation: fadeIn 1s ease forwards;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.8); }
      to   { opacity: 1; transform: scale(1); }
    }
    .close-btn {
      margin-top: 15px;
      padding: 6px 14px;
      border: none;
      border-radius: 8px;
      background: #ff6b8a;
      color: #fff;
      cursor: pointer;
      font-size: 16px;
    }
    .close-btn:hover { background: #e25575; }
  </style>
</head>
<body>
  <!-- Floating background hearts -->
  <div id="bg-hearts"></div>

  <!-- Intro box -->
  <div id="intro">
    <div class="box" onclick="showVideo()">💌 Open this!</div>
  </div>

  <!-- Video player with emoji overlay -->
  <div id="videoPlayer">
    <video id="vid" controls autoplay poster="assets/poster.jpg">
      <source src="assets/miss-you.mp4" type="video/mp4">
      Your browser doesn’t support video.
    </video>
    <div class="emoji-layer" id="emojiLayer"></div>
  </div>

  <!-- Love letter modal -->
  <div id="letter">
    <div class="letter-content">
      <p>I know you are stressed over your exams, This is a reminder that you are strong! 💕</p>
      <button class="close-btn" onclick="closeLetter()">Close</button>
    </div>
  </div>

  <script>
    // Floating background hearts
    const bg = document.getElementById('bg-hearts');
    setInterval(() => {
      const heart = document.createElement('div');
      heart.className = 'heart';
      heart.textContent = '❤';
      heart.style.left = Math.random() * 100 + 'vw';
      heart.style.fontSize = (20 + Math.random()*20) + 'px';
      heart.style.animationDuration = (8 + Math.random()*6) + 's';
      bg.appendChild(heart);
      setTimeout(() => heart.remove(), 15000);
    }, 800);

    // Video + crying emojis
    const video = document.getElementById('vid');
    const emojiLayer = document.getElementById('emojiLayer');
    let emojiInterval;

    function showVideo() {
      document.getElementById('intro').style.display = 'none';
      document.getElementById('videoPlayer').style.display = 'block';
    }

    video.addEventListener('play', () => {
      if (!emojiInterval) {
        emojiInterval = setInterval(spawnEmoji, 700);
      }
    });
    video.addEventListener('pause', stopEmojis);
    video.addEventListener('ended', () => {
      stopEmojis();
      document.getElementById('letter').style.display = 'flex';
    });

    function stopEmojis() {
      clearInterval(emojiInterval);
      emojiInterval = null;
    }

    function spawnEmoji() {
      const emoji = document.createElement('span');
      emoji.className = 'emoji';
      emoji.textContent = '😢';
      emoji.style.left = Math.random() * 90 + 'vw';
      emoji.style.fontSize = (22 + Math.random() * 18) + 'px';
      emoji.style.animationDuration = (5 + Math.random() * 3) + 's';
      emojiLayer.appendChild(emoji);
      setTimeout(() => emoji.remove(), 9000);
    }

    // Letter modal
    function closeLetter() {
      document.getElementById('letter').style.display = 'none';
    }
  </script>
</body>
</html>
